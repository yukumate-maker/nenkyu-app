<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>休憩パターン設定</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  font-family: system-ui, -apple-system;
  background: #f4f6f8;
  margin: 0;
}
.container {
  max-width: 420px;
  margin: auto;
  padding: 16px;
}
.card {
  background: #fff;
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 16px;
}
input, button {
  width: 100%;
  padding: 10px;
  margin-top: 8px;
  box-sizing: border-box;
}
button {
  background: #2c7be5;
  color: #fff;
  border: none;
  border-radius: 6px;
}
.small {
  font-size: 13px;
  color: #666;
}
.list {
  margin-top: 10px;
}
.item {
  padding: 8px;
  border-bottom: 1px solid #eee;
  display: flex;
  justify-content: space-between;
}
.delete {
  background: #dc3545;
  border-radius: 4px;
  padding: 4px 8px;
  font-size: 12px;
}
</style>
</head>

<body>
<div class="container">

<h2>休憩パターン設定</h2>

<div class="card">
  <div class="small">パターン名</div>
  <input id="name" placeholder="例：A校時">

  <div class="small">休憩開始</div>
  <input type="time" id="start">

  <div class="small">休憩終了</div>
  <input type="time" id="end">

  <button onclick="addPattern()">追加</button>
</div>

<div class="card">
  <div class="small">登録済みパターン</div>
  <div id="list" class="list"></div>
</div>

<div class="card">
  <button onclick="location.href='index.html'">戻る</button>
</div>

</div>

<script>
/* ===== storage ===== */
function getPatterns(){
  return JSON.parse(localStorage.getItem("breakPatterns") || "[]");
}
function savePatterns(p){
  localStorage.setItem("breakPatterns", JSON.stringify(p));
}

/* ===== 表示 ===== */
function render(){
  const list = document.getElementById("list");
  list.innerHTML = "";
  getPatterns().forEach((p, i) => {
    const div = document.createElement("div");
    div.className = "item";
    div.innerHTML = `
      ${p.name}（${p.start}〜${p.end}）
      <button class="delete" onclick="del(${i})">削除</button>
    `;
    list.appendChild(div);
  });
}

/* ===== 追加 ===== */
function addPattern(){
  const nameEl = document.getElementById("name");
  const startEl = document.getElementById("start");
  const endEl = document.getElementById("end");

  const patternName = nameEl.value.trim();
  if(!patternName || !startEl.value || !endEl.value){
    alert("すべて入力してください");
    return;
  }

  const p = getPatterns();
  p.push({
    name: patternName,
    start: startEl.value,
    end: endEl.value
  });
  savePatterns(p);

  nameEl.value = "";
  startEl.value = "";
  endEl.value = "";

  render();
}

/* ===== 削除 ===== */
function del(i){
  if(!confirm("削除しますか？")) return;
  const p = getPatterns();
  p.splice(i,1);
  savePatterns(p);
  render();
}

render();
</script>

</body>
</html>

